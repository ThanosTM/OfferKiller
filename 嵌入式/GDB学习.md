## GDB概述
GDB是GNU发布的一个强大的UNIX下的程序调试工具，可以完成以下四个方面的功能：
- 根据自定义的要求运行程序；
- 在指定的断点处停住（可以是条件表达式）；
- 当程序停住时，可以检查程序中所发生的事；
- 动态地改变程序的执行环境；

## 使用GDB
首先编译的时候要加上-g选项，生成的可执行文件包含了调试所需要的必要信息（如代码行号、变量名称等等）：
```
    gcc -g test.c -o test
```

GDB 的常用调试指令有：
- bread xxx/b xxx：在某一行打断点；
- run/r：开始运行程序，直到第一个断点处停止；
- continue/c：当程序在某个断点处停止时，继续执行程序；
- next/n：执行下一行程序；
- print xxx/p xxx：打印xxx变量的值；
- list/l：显示源代码内容；
- quit/q：终止调试；

## 开始调试程序
#### 指定目标文件
- 对于已启动的GDB调试器，可以先输入l验证是否已找到指定的目标文件，若显示无法加载符号表则必须手动指定目标文件：
```
    file ~/node/test
```

#### 设定程序的启动参数
- 在gdb启动时可以输入一下命令：
```
    gdb --args test 1 2 3
```

- 当然启动后也可以随时进行设置和修改
```
    set args 1 2 3
```

- 查看现在的参数
```
    show args
```

#### 设置调试器工作目录
就和shell下一样：
```
    cd ~/code/gdb
```

#### 修改==临时==PATH环境变量
这种方式的修改只是临时的，只在GDB内生效的，退出后失效的：
```
    path /temp/demo
```

#### 重定向输入输出
默认的输出是打印在屏幕上，也可以对其进行重定位
```
    run  > a.txt
```

## 打断点调试
两种格式：
#### b location
这里的location可以是如下形式：
- 10
- test.c:10
- +/- offset：offset以当前程序的暂定位置为基准
- function：断点打在该函数的开头处
- test.c：function

#### b location if condition
这里location仍可取以上5种形式，同时可以仅在condition为True的情况下暂停执行程序；


#### 两个变种
- tbreak：断点只生效一次后自动消失；
- rbreak：使用语法为rbreak regex，指定了一个正则表达式，只要遇到符合regex的函数名，都会在该函数的开头打上断点；


## 设置观察点
break是普通断点，而watch则是观察点，借助观察点可以监控程序中某个变量或者表达式的值，只要发生改变就会停止执行，想比普通断点，不需要预测变量发生改变的具体位置。

其使用方法为：
```
    watch cond
```

同时有以下两种变种：
- rwatch：出现读取目标变量的值的操作就停止；
- awatch：读取或者修改就停止；

需要注意的是：
- 当监控的表达式或者变量是局部的时，一旦超出作用域，则监控操作会自动失效；
- 当监控对象是一个指针时，watch p监控指针本身的指向，而watch *p则监控指针所指向的数据；
- 监控一个数组时，例如a[10]，watch a 只要a数组中存储的数据发生变化则停止；


## 设置捕捉点
监控的是某一事件的发生。

## 条件断点
- `condition bnum exp`：这是给已经存在的断点添加条件，bnum是目标断点的编号，这可以由info break指令查看；
- `ignore bnum count`：使编号为bnum的断点暂时失效count次，之后重新生效。


## 单步调试程序
GDB提供了3种单步调试程序的方法：
#### next命令
向前执行多少行，特点是遇到函数调用时，next指令将一步执行完毕；
```
    next count
```

#### step命令
与next不同的是，遇到函数调用会进入函数内部，并在第一行代码处停下；
```
    step count
```

#### until命令
有两种形式：
- until，不带参数，若该行为循环体的最后一行，则将快速运行完当前的循环体，运行至外部停止；否则相当于next；
- until location：带行数，运行至某一行结束。


## 查看变量的值
